<!--
 - Created by presh on 30-10-2018.
 -->

<aura:component description="Dal_SSC_InventorySearchRecordList"
                implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction"
                access="global" extends="c:Dal_SSC_InventoryBase" controller="Dal_InventorySearchController">


    <!-- Internal Atributes -->
    <aura:attribute name="count" type="Integer" default="0"/>
    <aura:attribute name="isProductSelected" type="Boolean" default="false"/>
    
    <!-- Calculate Position -->
    <aura:attribute name="pos" type="Integer" default="1"/>

    <!-- Events -->
    <aura:registerEvent name="positionEvent" type="c:Dal_SSC_InventorySearchCurrentPage"/>

    <!-- Labels -->
    <aura:attribute name="labelCheckInventory" type="String" default="Check Inventory"/>

    <!-- Pagination -->
    <aura:attribute name="totalPages" type="Integer" />
    <aura:attribute name="pageNumber" type="Integer" default="1" />


    <!-- Body Starts Here -->
    <div class="baseCard slds-size_12-of-12">

        <!-- Header with count of selected sku with button to navigate to next page -->
        <lightning:layout class="dal-form-order slds-grid slds-grid_align-center for-button slds-grid_vertical-align-center slds-wrap" multipleRows="true" horizontalAlign="center" verticalAlign="center">
            <lightning:layoutItem class="slds-grid slds-p-around_small" size="12" smallDeviceSize="12" mediumDeviceSize="12" largeDeviceSize="6">
                <div class="orderStats orderStats-medium orderStats-textLeftLarge dal-medium-inputFull dal-small-inputFull">

                </div>
            </lightning:layoutItem>

            <lightning:layoutItem class="slds-p-around_small" size="12" smallDeviceSize="12" mediumDeviceSize="12" largeDeviceSize="6">
                <div class="btnSaveContinue slds-grid slds-wrap slds-grid_align-center">
                    <div class="dal-table-select-count">
                        <b class="slds-text-title_caps ">
                            
                            <aura:if isTrue="{!v.displayProdList.length > 0}">
                               {!v.count}
                                <aura:set attribute="else">
                                    0
                                </aura:set>
                            </aura:if>
                            Selected</b>
                    </div>
                    <div>
                        <lightning:button class="top-search-button slds-m-bottom_medium slds-text-title_caps"
                                          onclick="{!c.navigateToNextPage}"
                                          label="{!v.labelCheckInventory}" disabled="{!!(v.listOfSelectedProducts.length > 0)}"
                                          title="{!v.labelCheckInventory}" variant="destructive"/>
                    </div>
                </div>
            </lightning:layoutItem>
        </lightning:layout>


        <!-- Displaying the product list -->
        <lightning:layout class="section-top-custom">

            <lightning:layoutItem size="12" class="dal-searchResultsContainer ">
                <aura:if isTrue="{!v.responseWrapperData.length > 0}">

                    <!-- Iteration of products -->
                    <lightning:layoutItem size="12" >

                        <!-- Data Table -->
                        <table class="slds-table slds-table_cell-buffer slds-no-row-hover">

                            <thead>
                            <tr class="slds-line-height_reset">
                                <th class="slds-text-title_caps table-wrap-custom slds-cell-wrap cell-custom-padding " scope="col">

                                </th>
                                <th class="slds-text-title_caps table-wrap-custom cell-custom-padding table-column-sku" scope="col">
                                    <div class="table-wrap-custom" title="Product/Sku#">Product/Sku#</div>
                                </th>
                                <th class="slds-text-title_caps table-wrap-custom cell-custom-padding inventory-table-color-section" scope="col">
                                    <div class="table-wrap-custom" title="SIZE">SIZE</div>
                                </th>
                                <th class="slds-text-title_caps table-wrap-custom cell-custom-padding inventory-table-color-section" scope="col">
                                    <div class="table-wrap-custom" title="COLOR">COLOR</div>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <aura:iteration items="{!v.displayProdList}" var="result" indexVar="index">

                                <tr class="{! (result.isChecked == true) ? 'color-for-selected-sku slds-hint-parent' : 'default-skulist slds-hint-parent' }">

                                    <td class="cell-custom-padding table-wrap-custom table-checkbox-custom" data-label="Selection">
                                        <lightning:input class="" variant="label-hidden" type="checkbox" value="{!index}"
                                                         label="" aura:id="checkCheckboxes" onchange="{!c.onCheck}" checked="{!result.isChecked}"
                                                         name="{!index}"/>
                                    </td>

                                    <td class="cell-custom-padding table-wrap-custom" data-label="Product/Sku#">
                                        <b>
                                            <div class="table-wrap-custom"
                                                 title="{!result.Description}">{!result.Description}
                                            </div>
                                        </b>
                                        <div class="table-product-sku-font table-wrap-custom">
                                            {!result.DW_ID__c}
                                        </div>

                                    </td>

                                    <td class="cell-custom-padding inventory-table-color-section" data-label="SIZE">
                                        <aura:if isTrue="{!result.Size__c}" >
                                            <div class="table-wrap-custom" title="Size">{!result.Size__c}</div>
                                        </aura:if>
                                    </td>

                                    <td class="cell-custom-padding inventory-table-color-section" data-label="COLOR">
                                        <aura:if isTrue="{!and(result.Product_Color__r.Name,not(result.Product_Color__r.Name == '9999'))}" >
                                            <div class="table-wrap-custom" title="">{!result.Product_Color__r.Name}</div>
                                        </aura:if>
                                    </td>

                                </tr>

                            </aura:iteration>

                            </tbody>
                        </table>

                        <!-- Pagination -->
                        <div class="table-pagination-spacing slds-grid">
                            <p class="dal-page-detail"> {!v.responseWrapperData.length} items &nbsp;&nbsp; <strong
                                        class="pagination-dot-custom">.</strong> &nbsp;&nbsp; Page {!v.pageNumber}
                                of {!v.totalPages} &nbsp;&nbsp;</p>


                            <lightning:button name="previous page" label="Previous Page" value="prev"
                                              title="Previous Page" onclick="{!c.changePageData}"
                                              variant="base" class="dal-page-number"
                                                disabled="{!v.pageNumber == 1}">
                                <lightning:icon alternativeText="Next" iconName="utility:chevronleft"
                                                size="x-small"/>
                                Prev
                            </lightning:button>


                                <!-- <a href="" name="1" onclick="{!c.changePageData}" ><div class="dal-page-number">1</div> </a>-->
                                <lightning:button name="{!v.pageNumber}" label="{!v.pageNumber}" title="{!v.pageNumber}"
                                                  onclick="{!c.changePageData}"
                                                  variant="base"
                                                  class="dal-page-number selected-page"
                                                  value="{!v.pageNumber}"/>

                                <!--     <a href="" name="2" onclick="{!c.changePageData}" ><div class="dal-page-number">2</div></a> -->
                                <lightning:button name="{!v.pageNumber + 1}" label="{!v.pageNumber + 1}" title="{!v.pageNumber+1}"
                                                  value="{!v.pageNumber + 1}"
                                                  onclick="{!c.changePageData}" variant="base"
                                                  disabled="{!(v.pageNumber) == (v.totalPages) }"
                                                  class="dal-page-number"/>

                            <!--  <a href="" name="next" onclick="{!c.changePageData}"><div class="dal-page-number slds-grid">
                                        Next Page
                                        <lightning:icon alternativeText="Next" iconName="utility:chevronright" size="x-small"/>
                                    </div>
                                </a>-->
                            <lightning:button name="next page" label="Next Page" value="next" title="Next Page"
                                              onclick="{!c.changePageData}" variant="base"
                                              disabled="{!(v.pageNumber) == (v.totalPages) }"
                                              class="dal-page-number"> Next
                                <lightning:icon alternativeText="Next" iconName="utility:chevronright"
                                                size="x-small"/>
                            </lightning:button>

                        </div>

                    </lightning:layoutItem>

                </aura:if>
            </lightning:layoutItem>

        </lightning:layout>


        <!-- Footer with count of selected sku with button to navigate to next page -->

        <!-- Test -->
        <lightning:layout class="dal-form-order slds-grid slds-grid_align-center for-top-button slds-grid_vertical-align-center slds-wrap" multipleRows="true" horizontalAlign="center" verticalAlign="center">
            <lightning:layoutItem class="slds-grid slds-p-around_small" size="12" smallDeviceSize="12" mediumDeviceSize="12" largeDeviceSize="6">
                <div class="orderStats orderStats-medium orderStats-textLeftLarge dal-medium-inputFull dal-small-inputFull">

                </div>
            </lightning:layoutItem>

            <lightning:layoutItem class="slds-p-around_small" size="12" smallDeviceSize="12" mediumDeviceSize="12" largeDeviceSize="6">

                <div class="btnSaveContinue slds-grid slds-wrap slds-grid_align-center">

                    <div class="dal-table-select-count">
                        <b class="slds-text-title_caps ">
                            <aura:if isTrue="{!v.displayProdList.length > 0}">
                                {!v.count}
                                <aura:set attribute="else">
                                    0
                                </aura:set>
                            </aura:if>
                            SELECTED</b>
                    </div>

                    <lightning:button class="top-search-button slds-m-bottom_medium slds-text-title_caps"
                                      onclick="{!c.navigateToNextPage}"
                                      label="{!v.labelCheckInventory}" disabled="{!!(v.listOfSelectedProducts.length > 0)}"
                                      title="{!v.labelCheckInventory}" variant="destructive"/>
                </div>

            </lightning:layoutItem>
        </lightning:layout>


    </div>

</aura:component>