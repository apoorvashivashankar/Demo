<!--
 - Created by 7Summits on 5/17/18.
 -->

<aura:component description="Dal_InvoiceSearch" extends="c:Dal_Base" controller="Dal_InvoiceController" implements="force:appHostable,flexipage:availableForAllPageTypes,forceCommunity:availableForAllPageTypes">
    <aura:attribute name="invoiceNumber" type="String" default=""/>
    <aura:attribute name="purchaseOrder" type="String" default=""/>
    <aura:attribute name="jobName" type="String" default=""/>
    <aura:attribute name="divisionName" type="String" default=""/>
    <aura:attribute name="invoiceDateStart" type="Date" default=""/>
    <aura:attribute name="invoiceDateEnd" type="Date" default=""/>
    <aura:attribute name="lineStatus" type="String" default=""/>
    <aura:attribute name="lineStatusSelected" type="String" />
    <aura:attribute name="searchButton" type="String" default=""/>
    <aura:attribute name="communityType" type="String" default="Distributor" />
    <aura:attribute name="listType" type="String" default="Search Invoices"/>
    <aura:attribute name="brandlist" type="List" default="[]" />

    <aura:attribute name="hasPagination" type="Boolean" default="false" />
    <aura:attribute name="paginationItemsPerPage" type="Integer" default="30" />
    <aura:attribute name="paginationStartPage" type="Integer" default="0" />
    <aura:attribute name="listMaximum" type="Integer" default="300" />

    <aura:handler name="init" value="{! this }" action="{! c.init }"/>

    <lightning:layout pullToBoundary="small" multipleRows="true">
        <lightning:layoutItem size="12" class="slds-p-vertical--large">
            <lightning:layout multipleRows="true">
                <lightning:layoutItem class="slds-p-around_x-small" size="12" mediumDeviceSize="6" largeDeviceSize="2">
                    <ui:inputText aura:id="invoiceNumber" label="Invoice Number"
                                  class="slds-p-around_small input-x-small"
                                  value="{!v.invoiceNumber}"
                                  required="false"
                                  maxlength="11"
                    />
                </lightning:layoutItem>
                <lightning:layoutItem class="slds-p-around_x-small" size="12" mediumDeviceSize="6" largeDeviceSize="2">
                    <ui:inputText aura:id="purchaseOrder" label="Purchase Order"
                                  class="slds-p-around_small input-x-small"
                                  value="{!v.purchaseOrder}"
                                  required="false"/>
                </lightning:layoutItem>
                <aura:if isTrue="{!(v.listType == 'Search Invoices')}">
                    <lightning:layoutItem class="slds-p-around_x-small" size="12" mediumDeviceSize="6" largeDeviceSize="2">
                        <ui:inputText aura:id="jobName" label="Job Name"
                                      class="slds-p-around_small input-x-small"
                                      value="{!v.jobName}"
                                      required="false"/>
                    </lightning:layoutItem>
                </aura:if>
                <aura:if isTrue="{!(v.listType != 'Search Invoices')}">
                <lightning:layoutItem class="orderDate slds-p-around_x-small" size="12" mediumDeviceSize="6"
                                      largeDeviceSize="4">
                    <label class="uiLabel">Invoice Date Between</label>
                    <div>
                        <ui:inputDate aura:id="orderStartDate" displayDatePicker="true"
                                      value="{!v.invoiceDateStart}"
                                      format="MM/DD/YYYY"
                                      required="true"/>
                        <span class="dateSeparator">-</span>
                        <ui:inputDate aura:id="orderEndDate" displayDatePicker="true"
                                      value="{!v.invoiceDateEnd}"
                                      format="MM/DD/YYYY"
                                      required="true"/>
                    </div>
                </lightning:layoutItem>
              
                
                {!v.brandlist}
                <lightning:layoutItem class="orderStatus slds-p-around_x-small" size="12" mediumDeviceSize="6" largeDeviceSize="2">
                    <lightning:select name="divisionName" label="Brand" aura:id="divisionName" value="{!v.lineStatus}"
                                      class="input-x-small" onchange="{!c.onLineStatusChange}">
                        <option value="" label="" selected="selected">-None-</option>
                        <aura:iteration items="{!v.brandlist}" var="lineStatus">
                            <option value="{!lineStatus}" selected="{!lineStatus.selected}" label="{!lineStatus}"></option>
                        </aura:iteration>
                    </lightning:select>
                </lightning:layoutItem>
                  </aura:if>
                <lightning:layoutItem class="searchButton slds-align-content-center  slds-p-horizontal_x-small" size="12" mediumDeviceSize="6" largeDeviceSize="2">
                    <lightning:button variant="neutral" label="Search" onclick="{!c.searchInvoices}"/>
                </lightning:layoutItem>
            </lightning:layout>
        </lightning:layoutItem>
        <lightning:layoutItem size="12">
            <!-- Deffect No-653 : Updated hasPagination="true" from hasPagination="{!v.hasPagination}" for default paging. -->
            <c:Dal_InvoiceList aura:id="invoiceListComponent" userType="{!v.communityType}" brandlist ="{!v.brandlist}" listType="{!v.listType}"
                             hasPagination="true" paginationItemsPerPage="{!v.paginationItemsPerPage}" paginationStartPage="{!v.paginationStartPage}" listMaximum="{!v.listMaximum}"/>

        </lightning:layoutItem>
    </lightning:layout>

</aura:component>