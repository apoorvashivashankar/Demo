<!-- Copyright Â©2016-2017 7Summits Inc. All rights reserved. -->
<aura:component controller="SVNSUMMITS_IdeaViewController"
                implements="force:appHostable,forceCommunity:availableForAllPageTypes,flexipage:availableForAllPageTypes,force:hasRecordId,force:hasSObjectName"
                access="global">

	<aura:attribute name="debugMode" type="Boolean" default="false" description="test" access="global"/>

	<!-- Design attributes -->
	<aura:attribute name="zoneName" type="String" default="" required="true" access="global"/>
	<aura:attribute name="showPoints" type="Boolean" default="false" access="global"/>
	<aura:attribute name="showStage" type="Boolean" default="false" access="global"/>
	<aura:attribute name="recordId" type="String" default="{!recordId}" access="global" required="true"/>

	<aura:attribute name="zoneId" type="String" access="global"/>
	<aura:attribute name="idea" type="Idea" access="global"/>
	<aura:attribute name="sObjectName" type="String" access="global"/>
	<aura:attribute name="currentVote" type="Vote" access="global"/>
	<aura:attribute name="sitePath" type="String" access="global"/>
	<aura:attribute name="sitePrefix" type="String" access="global"/>
	<aura:attribute name="currentURL" type="String" access="global"/>

	<!-- UI -->
	<aura:attribute name="tooltipVoteUp" type="String" default="{!$Label.c.ss_idea_label_UpVote}" access="global"/>
	<aura:attribute name="tooltipVoteDown" type="String" default="{!$Label.c.ss_idea_label_DownVote}" access="global"/>
	<aura:attribute name="callToAction" type="String" default="{!$Label.c.ss_idea_label_VoteOnIdeaCTA}" access="global"/>
	<aura:attribute name="labelPoints" type="string" default="{!$Label.c.ss_idea_label_points}" access="global"/>

	<aura:attribute name="disableDownVoting" type="Boolean" default="false" description="Set in Custom settings" access="global"/>

	<aura:handler name="init" value="{!this}" action="{!c.doInit}"/>

	<div class="vote-badge">
		<aura:if isTrue="{!and(v.idea.Id, v.zoneId != '')}">

			<div class="slds-grid slds-wrap">
				<aura:if isTrue="{!v.showStage}">
					<div class="idea-status">{!v.idea.Status}</div>
				</aura:if>

				<aura:if isTrue="{!v.showPoints}">
					<h2 class="slds-size--1-of-1 slds-text-heading--large">{!v.idea.VoteTotal}
						&nbsp;{!v.labelPoints}</h2>
				</aura:if>

				<div class="slds-size--1-of-1 slds-p-vertical--small slds-text-heading--label">{!$Label.c.ss_idea_label_VoteOnIdeaCTA}</div>

				<!-- Vote buttons -->
				<div class="slds-p-vertical--small slds-size--1-of-1">
					<aura:if isTrue="{!v.currentVote.Id}">
						<lightning:button disabled="true"
						                  iconName="utility:like"
						                  class="{!'slds-button slds-button--brand' + if(and(v.currentVote.Type == 'Down', not(v.disableDownVoting)), ' upsideDown')}"/>
						<aura:set attribute="else">
							<lightning:button iconName="utility:like"
							                  variant="brand"
							                  title="{!v.tooltipVoteUp}"
							                  onclick="{!c.voteUp}"/>
							<aura:if isTrue="{!not(v.disableDownVoting)}">
								<lightning:button iconName="utility:dislike"
								                  title="{!v.tooltipVoteDown}"
								                  onclick="{!c.voteDown}"/>
							</aura:if>
						</aura:set>
					</aura:if>
				</div>
			</div>
		</aura:if>
	</div>
</aura:component>