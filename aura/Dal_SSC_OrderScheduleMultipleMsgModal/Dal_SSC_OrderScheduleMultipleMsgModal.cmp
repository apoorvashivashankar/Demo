<!--
 - Created by ranja on 06-12-2018.
 -->

<aura:component description="Dal_SSC_OrderScheduleMultipleMsgModal" extends="c:Dal_ModalBase" controller="Dal_ScheduleOrderController">

    <aura:attribute name="successMesageDelivery" type="String" default="Your orders have been successfully submitted for delivery."/>
    <aura:attribute name="successMesagePickup" type="String" default="Your orders have been successfully submitted for pickup."/>
    <aura:attribute name="failureMessage" type="String" default="Failed to schedule the orders."/>
    <aura:attribute name="isDelivery" type="String" default="false" />
    <aura:attribute name="successedSkus" type="List" default="[]" />
    <aura:attribute name="isDashboard" type="boolean" default="false"/>
    <aura:attribute name="isSuccess" type="Boolean" default="true"/>
    <aura:attribute name="store" type="Map" />
    <aura:attribute name="orderWrapper" type="List" default="[]"/>
    <aura:attribute name="listOfOrders" type="List" default="[]"/>
    <aura:attribute name="showSpinner" type="boolean" default="false" />
    <aura:attribute name="showModal" type="boolean" default="true" />
    <aura:attribute name="failedSkus" type="List" default="[]" />

    <!-- Modal -->
    <aura:attribute name="baseModal" type="Map" />
    <lightning:overlayLibrary aura:id="overlayLib" />

    <!-- Init Handler -->
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>


    <!-- Body -->
    <aura:if isTrue="{!v.showModal}" >
    <div class="" style="height: 640px;">
        <section role="dialog" tabindex="-1" aria-labelledby="Message" aria-modal="true" aria-describedby="Order Status"
                 class="slds-modal slds-fade-in-open slds-modal_medium">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <h2 id="" class="dal-modal-schedule-header slds-text-heading_medium slds-hyphenate">Saving Appointment</h2>
                </header>

                <!-- Body -->
                <div class="slds-modal__content slds-p-around_large slds-p-vertical_xx-large"  id="">

                    <div class="slds-p-around_medium slds-m-bottom_medium">
                        <ui:message class="dal-uiMessage slds-p-horizontal_medium slds-p-vertical_small" severity="confirm" closable="false">
                            <aura:if isTrue="{!v.isSuccess}">
                                <aura:if isTrue="{!v.isDelivery}">
                                    {!v.successMesageDelivery}

                                    <aura:set attribute="else">
                                        {!v.successMesagePickup}
                                    </aura:set>
                                </aura:if>

                                <aura:set attribute="else">
                                    {!v.failureMessage}
                                </aura:set>
                            </aura:if>
                        </ui:message>
                    </div>



                    <aura:if isTrue="{!v.isSuccess}">
                    <table class="dal-item-table slds-table slds-table_bordered slds-table_cell-buffer slds-no-row-hover
                                slds-max-medium-table_stacked-horizontal">
                        <thead>
                        <tr class="slds-text-title_caps">
                            <th scope="col" class="slds-cell-wrap">
                                <div class="slds-truncate" title="Line #">Line #</div>
                            </th>
                            <th scope="col" class="slds-cell-wrap">
                                <div class="slds-truncate" title="Order #">Order #</div>
                            </th>
                            <th scope="col" class="slds-cell-wrap">
                                <div class="slds-truncate" title="Total Items">Total Items</div>
                            </th>

                        </tr>
                        </thead>

                        <tbody>
                        <!-- SPINNER -->
                        <aura:if isTrue="{!v.showSpinner}">
                            <div class="slds-is-relative slds-p-around_xx-large">
                                <lightning:spinner variant="brand" />
                            </div>
                        </aura:if>
                        <aura:iteration items="{!v.orderWrapper}" var="sku" indexVar="index">
                            <tr>
                                <td class="slds-cell-wrap" data-label="Line #">
                                    <div class="slds-truncate" title="{!index + 1}"><h4>{!index +1}</h4></div>
                                </td>
                                <td class="slds-cell-wrap" data-label="Order #">
                                    <div class="slds-truncate" title="{!sku.orderNumber}">
                                        <h4>{!sku.orderNumber}</h4>
                                    </div>
                                </td>
                                <td class="slds-cell-wrap" data-label="Total Items">
                                    <div class="slds-truncate" title="{!sku.countOfSkus}">{!sku.countOfSkus}</div>
                                </td>
                            </tr>
                        </aura:iteration>
                        <!-- ******************** -->
                        <!-- end items rows -->
                        <!-- ******************** -->

                        </tbody>
                    </table>
                    </aura:if>
                </div>
                <footer class="slds-modal__footer">
                    <button class="slds-button slds-button_neutral" onclick="{!c.handleCloseModal}">CLOSE</button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </div>
    </aura:if>
</aura:component>