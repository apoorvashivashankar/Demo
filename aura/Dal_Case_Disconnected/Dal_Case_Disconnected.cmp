<aura:component description="Dal_Case_Disconnected" controller="CSRDisconnectedCaseUtility" implements="lightning:isUrlAddressable,lightning:utilityItem,force:appHostable,flexipage:availableForRecordHome,forceCommunity:availableForAllPageTypes,flexipage:availableForAllPageTypes,force:hasRecordId,force:lightningQuickAction,force:hasSObjectName" access="global" >
    <lightning:utilityBarAPI aura:id="utilitybar" />
    
    <aura:attribute name="newCase" 
                    type="Case" 
                    default="{'sobjectType':'Case', 'Subject':'', 'Description':'', 'AccountId':'', 'ContactId':''}"/>
    <force:recordData aura:id="forceRecord"
                      recordId="{!v.recordId}"
                      targetFields="{!v.newCase}"
                      fields="Id,Subject,Status,Description,AccountId,ContactId"
                      mode="EDIT" /> 
	
    <aura:attribute name="isLoading" type="Boolean" default="false"/>
    <aura:attribute name="newCaseSubject" type="Boolean" default="Disconnected Call"/>
    <aura:attribute name="newCaseDescription" type="Boolean" default=""/>
    
    <aura:attribute name="visualforceDomain" type="String" default="{!$Label.c.Domain_Visualforce}"/>
    
    <aura:attribute name="accountOptions" type="List" default="[]"/>
    <aura:attribute name="selectedAccount" type="String" default=""/>
    <aura:attribute name="contactOptions" type="List" default="[]"/>
    <aura:attribute name="selectedContact" type="String" default=""/>
    <aura:attribute name="isAccount" type="Boolean" default="false"/>
    <aura:attribute name="isContact" type="Boolean" default="false"/>
    <aura:attribute name="isVF" type="Boolean" default="false"/>

    
    <aura:attribute name="Spinner" type="boolean" default="false"/>
    <aura:attribute name="supportsPopOut" type="Boolean" default="false" />
    <aura:handler name="init" action="{!c.init}" value="{!this}"/>
    <aura:handler event="aura:waiting" action="{!c.showSpinner}"/>
    <aura:handler event="aura:doneWaiting" action="{!c.hideSpinner}"/>

     <aura:if isTrue="{!v.Spinner}">
        <div aura:id="spinnerId" class="slds-spinner_container">
           <div class="slds-spinner--brand  slds-spinner slds-spinner--large slds-is-relative" role="alert">
             <span class="slds-assistive-text">Loading</span>
             <div class="slds-spinner__dot-a"></div>
             <div class="slds-spinner__dot-b"></div>
           </div>
        </div>
     </aura:if>    
    
    <div class="slds-page-header">
      <div class="slds-page-header__row">
        <div class="slds-page-header__col-title">
          <div class="slds-media">
            <div class="slds-media__figure">	
              <span class="slds-icon_container slds-icon-standard-case" title="case">
				<lightning:icon iconName="utility:case" size="medium" />
                <span class="slds-assistive-text">case</span>
              </span>
            </div>
            <div class="slds-media__body">
              <div class="slds-page-header__name">
                <div class="slds-page-header__name-title">
                  <h1>
                    <span class="slds-page-header__title slds-truncate" title="New Case">New Disconnected Case</span>
                  </h1>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>    
    
    <div class="slds-page-body">    
        <article class="slds-card">
             <div class="slds-card__body slds-card__body_inner">
                <lightning:layout >
                    <div class="slds-form" role="list">
                        <div class="slds-form__row">
                            <div class="slds-form__item" role="listitem">
                                <aura:if isTrue="{!v.isVF}">
                                    <div class="slds-form-element__control slds-p-top_medium">
                                        <lightning:inputField label="Account" tabIndex="-1" aura:id="accountId" fieldName="AccountId" onchange="{!c.loadContacts}"/>
                                    </div>
                                    <div class="slds-form-element__control slds-p-top_medium">
                                        <lightning:inputField label="Contact" tabIndex="-1" aura:id="contactId" fieldName="ContactId" onchange="{!c.loadContacts}"/>
                                    </div>
                                </aura:if>
                            </div>
                            <div class="slds-form__item" role="listitem">
                                <div class="slds-form-element ">
                                    <div class="slds-form-element__control">
                                        <lightning:input aura:id="caseSubject" label="Subject" name="Subject" type="text" value="{!v.newCaseSubject}" />
                                    </div>  
                                </div>
                            </div>
                            <div class="slds-form__item" role="listitem">
                                <div class="slds-form-element ">
                                    <div class="slds-form-element__control">
                                        <lightning:select aura:id="caseStatus" label="Status"  name="Status">
                                            <option value="Disconnected">Disconnected</option>
                                        </lightning:select>  
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="slds-form__row">
                            <div class="slds-form__item" role="listitem">
                                <div class="slds-form-element ">
                                    <div class="slds-form-element__control">
                                        <lightning:textarea aura:id="caseDescription" id="single-form-element-id-04" name="" label="Description" value="{!v.newCaseDescription}" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </lightning:layout>    
            </div>
        </article>
    </div>    

	<div class="slds-page-footer">    
        <lightning:layout class="slds-p-around_medium" horizontalAlign="end"> 
            <lightning:layoutItem >
                <lightning:button variant="brand" label="Save Case" onclick="{!c.handleSave}" />
            </lightning:layoutItem>
        </lightning:layout>    
    
    </div>    

</aura:component>